{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
    .progress-container {
        display: flex;
        justify-content: space-between;
        position: relative;
        margin: 20px 0;
      }
      
      .progress-container::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 4px;
        background: #e0e0e0;
        z-index: 0;
      }
      
      .progress-step {
        width: 25px;
        height: 25px;
        background: #e0e0e0;
        border-radius: 50%;
        z-index: 1;
        position: relative;
      }
      
      .progress-step::before {
        content: attr(data-title);
        position: absolute;
        top: 35px;
        width: 100px;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        font-size: 12px;
      }
      
      .progress-step-active {
        background: #007bff;
        color: black;
      }
      
      .progress-step-pending {
        background: #e0e0e0;
        color: black;
      }
      
      .progress {
        display: flex;
        justify-content: space-between;
        width: 100%;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
      }
      
      .progress-bar {
        height: 4px;
        background: #007bff;
        width: 0;
        transition: width 0.4s ease;
      }
      
</style>

<div class="container" style="margin: 0 auto; width: 50%; padding: 50px; background: #f1f1f1; margin-top: 50px; margin-bottom: 50px;">
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default plain">
                <div class="panel-body p30">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="invoice-details mt25">
                                <div class="well">
                                    <ul class="list-unstyled mb0">
                                        <li><strong>Order</strong> #{{ order.order_number }}</li>
                                        <li><strong>Status</strong> {{ order.status }}</li>
                                        <li><strong>Order Date: </strong>{{ order.created_at }}</li>
                                        
                                    </ul>
                                </div>
                            </div>
                            <div class="tracking-details">
                                <h4>Order Status</h4>
                                <div class="progress-container">
                                    <div class="progress-step {% if order.status in 'Pending, Shipped, Out for delivery, Delivered' %}progress-step-active{% else %}progress-step-pending{% endif %}" data-title="Pending"></div>
                                    <div class="progress-step {% if order.status in 'Shipped, Out for delivery, Delivered' %}progress-step-active{% else %}progress-step-pending{% endif %}" data-title="Shipped"></div>
                                    <div class="progress-step {% if order.status in 'Out for delivery, Delivered' %}progress-step-active{% else %}progress-step-pending{% endif %}" data-title="Out for delivery"></div>
                                    <div class="progress-step {% if order.status == 'Delivered' %}progress-step-active{% else %}progress-step-pending{% endif %}" data-title="Delivered"></div>
                                    <div class="progress">
                                        <div class="progress-bar"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <div class="row">
                        <div class="col-lg-12 text-center mt20">
                            <a href="{% url 'accounts:order_detail' order_id=order.order_number %}" class="btn btn-secondary">Back to Order Details</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
  document.addEventListener("DOMContentLoaded", function() {
    let steps = document.querySelectorAll(".progress-step");
    let bar = document.querySelector(".progress-bar");
    let activeSteps = document.querySelectorAll(".progress-step-active").length;
    let progress = (activeSteps - 1) / (steps.length - 1) * 100;
    bar.style.width = progress + '%';
  });
</script>
{% endblock content %}